specVersion: 0.0.2
schema:
  file: ./subgraph/src/schema.graphql
dataSources:
  - kind: ethereum/contract
    name: SkillWallet
    network: mumbai
    source:
      address: '0x239D5940DCaD8e86Ad72E2F36C772300c67E6fC0'
      abi: SkillWallet
      startBlock: 12495356
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - SkillWallet
        - Community
      abis:
        - name: SkillWallet
          file: ./subgraph/abis/SkillWallet.json
      eventHandlers:
        - event: SkillWalletCreated(indexed address,indexed address,indexed uint256,((uint64,uint8),(uint64,uint8),(uint64,uint8)))
          handler: handleCreate
        - event: SkillWalletActivated(indexed uint256)
          handler: handleActivate
        - event: SkillWalletCommunityChanged(indexed uint256,address)
          handler: handleCommunityChange
      file: ./subgraph/src/skillwallet-mapping.ts
  - kind: ethereum/contract
    name: CommunitiesRegistry
    network: mumbai
    source:
      address: '0x0AE5d80b1089A12A4cc0D4ECc84Ecb7f487CEB2C'
      abi: CommunitiesRegistry
      startBlock: 12495356
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Community
      abis:
        - name: CommunitiesRegistry
          file: ./subgraph/abis/CommunitiesRegistry.json
      eventHandlers:
        - event: CommunityCreated(indexed address,indexed address,indexed address,string)
          handler: handleCreateCommunity
      file: ./subgraph/src/communities-registry-mapping.ts

templates:
  - kind: ethereum/contract
    name: Community
    network: mumbai
    source:
      abi: Community
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Community
        - Member
      abis:
        - name: Community
          file: ./subgraph/abis/Community.json
      eventHandlers:
        - event: MemberAdded(indexed address,uint256,uint256)
          handler: handleMemberAdded
      file: ./subgraph/src/community-mapping.ts